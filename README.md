# Modules Combiner CLI using Louvain and Greedy Modulation Algorithms

## Introduction
This Python Command-Line Interface (CLI) tool allows you to combine multiple files into modules or recombine existing modules using the Louvain and Greedy modulation algorithms based on the files' dependencies.
Works for JavaScript (AMD, CommonJS, and ES6 modules) and CSS preprocessors (Sass, Stylus, and Less).
It generates suggestions of modules with metrics to compare them.

## Installation
Ensure you have Python 3.x installed on your system. You can clone this repository and then install the required dependencies using `pip`.

```bash
pip install -r requirements.txt
```

## Usage
To combine files into modules, you need to run the `combine` command along with the desired modulation algorithm.

```bash
python main.py <arguments>
```

### CLI Arguments

The CLI (`main.py`) accepts the following command-line arguments:

1. `--files`: An array of paths to files or regular expressions (RegExp) to specify files that you want to combine into modules. You can specify multiple file paths by providing space-separated values. For example:

   ```bash
   python main.py --files file1.js src/modules/*
   ```

2. `--exclude`: An array of regular expressions (RegExp) used to exclude specific modules from the combination process. You can use this argument to exclude certain files or directories from being included in the final modules. For example:

   ```bash
   python main.py --exclude test_*
   ```

3. `--ts-config`: A path to a TypeScript configuration file (tsconfig) that provides information about alias mappings for resolving modules. This argument is helpful if your project uses TypeScript and you have custom module aliases defined in your tsconfig file. For example:

   ```bash
   python main.py --ts-config tsconfig.json
   ```

4. `--webpack-config`: A path to a Webpack configuration file that contains alias mappings for resolving modules. This argument is useful if your project uses Webpack and has custom aliases defined in the Webpack config. For example:

   ```bash
   python main.py --webpack-config webpack.config.js
   ```

5. `--require-config`: A path to a RequireJS configuration file that includes alias mappings for resolving modules. If your project uses RequireJS and has custom aliases defined in the RequireJS config, you can use this argument. For example:

   ```bash
   python main.py --require-config require.config.js
   ```

6. `--extensions`: An array of valid file extensions used to find files in directories. By default, the CLI considers only `.js` files, but you can specify file extensions using this argument. For example:

   ```bash
   python main.py --extensions .ts .tsx
   ```

Note: Each argument should be followed by its corresponding value(s). If an argument accepts multiple values, you can provide them as space-separated values.

## Output

When you run the CLI, it will generate various files inside the `output` folder that provide valuable information about the modules and their metrics. Below is a description of each output file:

### Modules

- `modules_current.json`: This file provides a preview of the current modules in the project. It lists the files included in each module.

- `modules_greedy.json`: This file contains the proposed modules generated by the Greedy Modulation Algorithm. It organizes files into new modules based on their dependencies.

- `modules_louvain.json`: This file contains the proposed modules generated by the Louvain Community Detection Algorithm. It groups files into modules to maximize modularity.

### Metrics

- `metrics_current.json` - metrics for current modules.

- `metrics_greedy.json` - metrics for modules generated by Greedy Modulation Algorithm.

- `metrics_louvain.json` - metrics for modules generated by Louvain Community Detection Algorithm.

These files include various metrics calculated for each module and summarized for all modules. These metrics help evaluate the organization and efficiency of the generated modules. The metrics provided are:

- `files`: The number of files inside the module.

- `outerConnections`: The total number of outer imports and exports in the module.

- `outerImports`: The number of files imported to the module from outside.

- `outerExports`: The number of files exported from the module to the outside.

- `maxOuterImportsOneFile`: The maximum number of outer imports in one file within the module.

- `maxOuterExportsOneFile`: The maximum number of outer exports from one file within the module.

- `filesWithOuterImports`: An array of files that import files from outside the module.

- `filesWithOuterExports`: An array of files that are exported from the module to the outside.

### Files Dependencies

- `file_dependencies.json`: This file provides a list of dependencies for each file in the project. It shows which files depend on others and helps understand the relationships between files.
